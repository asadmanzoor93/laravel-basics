{
  "name": "vinyl-map2",
  "description": "Map vinyl files' contents as strings, so you can easily use existing code without needing yet another gulp plugin!",
  "version": "1.2.1",
  "main": "index.js",
  "dependencies": {
    "through2": "^2.0.0",
    "bl": "^1.0.0",
    "new-from": "0.0.3"
  },
  "devDependencies": {
    "eslint": "^1.7.3",
    "gulp": "~3.9.0",
    "gulp-util": "^3.0.7",
    "tap-spec": "^4.1.0",
    "tape": "^4.2.2"
  },
  "scripts": {
    "lint": "node_modules/.bin/eslint index.js test.js",
    "test": "npm run lint && node test.js"
  },
  "author": {
    "name": "Hugh Kennedy",
    "email": "hughskennedy@gmail.com",
    "url": "http://hughsk.io/"
  },
  "contributors": [
    {
      "name": "Nelson Pecora",
      "email": "nelson@keats.me"
    }
  ],
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "git://github.com/yoshokatana/vinyl-map2"
  },
  "bugs": {
    "url": "https://github.com/yoshokatana/vinyl-map2/issues"
  },
  "homepage": "https://github.com/yoshokatana/vinyl-map2",
  "keywords": [
    "vinyl",
    "gulp",
    "gulpfriendly",
    "file",
    "stream",
    "map"
  ],
  "readme": "# vinyl-map2\n\n[![Circle CI](https://circleci.com/gh/yoshokatana/vinyl-map2/tree/master.svg?style=svg)](https://circleci.com/gh/yoshokatana/vinyl-map2/tree/master)\n\nMap [vinyl](https://github.com/wearefractal/vinyl) files' contents as strings, so you can easily use existing code without needing yet another [gulp](https://github.com/gulpjs/gulp) plugin!\n\nEssentially, with the hope of reducing the number of gulp plugins out there which are *just* doing this:\n\n``` javascript\nvar through = require('through'),\n  uglify = require('uglify-js');\n\nmodule.exports = function() {\n  return through(function(file) {\n    if (file.isNull()) return this.queue(file);\n    if (file.isStream()) throw new Error('no support');\n\n    file.contents = file.contents.toString();\n\n    var minified = uglify.minify(file.contents, {\n      fromString: true\n    })\n\n    file = file.clone();\n    file.contents = new Buffer(minified.code);\n    this.queue(file);\n  });\n}\n```\n\nOf course, sometimes that's fine too, but this might help save some complexity for when it's too much hassle. It also takes care of the differences between handling Buffer, Stream and null values for your `file.contents`.\n\n## Usage\n\n```\nnpm install --save vinyl-map2\n```\n\nHere's a simple example, using gulp:\n\n``` javascript\nvar uglify = require('uglify-js'),\n  map = require('vinyl-map2'),\n  gulp = require('gulp');\n\ngulp.task('minify', function() {\n  var minify = map(function(code, filename) {\n    // file contents are handed\n    // over as buffers\n    code = code.toString();\n\n    return uglify.minify(code, {\n      fromString: true\n    }).code;\n  })\n\n  return gulp.src(['./index.js'])\n    .pipe(minify)\n    .pipe(gulp.dest('./dist'));\n})\n```\n\n## API\n\n### `map(mapper(contents, filename[, done]))`\n\nReturns a transform stream that takes vinyl files as input and spits out their modified copies as output.\n\n`mapper` is a function which will be called once for each file, with three arguments:\n\n* `contents` is a string or [Buffer](http://nodejs.org/api/buffer.html)\n* `filename` is the value of `file.path`, which should generally be the file's\n  absolute path. Might be convenient if you want to filter based on file\n  extension etc.\n* `done` is an _optional_ callback function. If your `mapper` function has a third argument, it will be called asynchronously. If not, the `mapper` will be called synchronously.\n\nThe `mapper` function is expected to return a modified string value for the updated file contents. If nothing is returned, no modifications will be made to the file contents, but the output file will be cloned.\n\nIf you run the `mapper` function asynchronously (by passing in a third `done` argument), you must call it instead of returning the file contents. It is a node-style callback: `done(err, contents)`\n\n## License\n\nMIT. See [LICENSE.md](http://github.com/yoshokatana/vinyl-map2/blob/master/LICENSE.md) for details.\n\n## Contributing\n\nThis project was forked from [hughsk/vinyl-map](https://github.com/hughsk/vinyl-map), and will be actively maintained. I welcome contributions in the form of both bug reports and pull requests!\n\nFork the project and submit a PR on a branch that is not named `master`. We use linting tools and unit tests, which are built constantly using continuous integration. If you find a bug, it would be appreciated if you could also submit a branch with a failing unit test to show your case.\n",
  "readmeFilename": "README.md",
  "_id": "vinyl-map2@1.2.1",
  "dist": {
    "shasum": "e34d4deee5e7711daf0c31c5f03a390ae293f263"
  },
  "_from": "vinyl-map2@^1.2.1",
  "_resolved": "https://registry.npmjs.org/vinyl-map2/-/vinyl-map2-1.2.1.tgz"
}
